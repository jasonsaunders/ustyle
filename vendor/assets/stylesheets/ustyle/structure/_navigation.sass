.us-header-nav-open,
.us-header-nav-close,
.us-header-nav-title
  display: none

#us-header-nav
  +normal-font
  position: absolute
  right: 1em
  bottom: -29px
  font-weight: normal
  line-height: 1em

  .backtotop
    display: none

  +respond-to(small-tablet, true)
    width: 84%
    height: 65px

    .about
      display: none

  +respond-to(tablet, true)
    width: 87%
    height: 69px

  .funnel &
    width: auto !important

.us-header-nav-base
  @extend %reset-box-model
  text-align: justify
  display: block

  &:after
    content: ''
    display: inline-block
    height: 0
    width: 100%
    line-height: 0

  .funnel &
    text-align: left

.us-header-nav-list,
.us-header-nav-item,
.us-header-nav-mainitem,
.us-header-nav-corpitem
  @extend %reset-box-model
  display: inline-block
  list-style-type: none

.us-header-nav-mainitem
  position: relative

  +respond-to(desktop, true)
    &.broadband 
      .us-header-nav-dropdown
        width: 290px

  +respond-to(small-tablet, true)
    &.active
      &:after
        content: ""
        display: block
        position: absolute
        left: 50%
        bottom: -1px
        margin-left: - 4px
        width: 0px
        height: 0px
        border-style: solid
        border-width: 0 8px 10px 8px
        border-color: transparent transparent $c-cyan transparent

      .us-header-keyline &
        &:after
          border-color: transparent transparent $grey-10 transparent

        &:before
          content: ""
          display: block
          position: absolute
          left: 50%
          bottom: -2px
          margin-left: - 4px
          width: 0px
          height: 0px
          border-style: solid
          border-width: 0 8px 10px 8px
          z-index: 10
          border-color: transparent transparent white transparent

      &.lightest
        &:after
          border-color: transparent transparent $c-cyan transparent
      &.cyan
        &:after
          border-color: transparent transparent $c-cyan transparent
      &.dark
        &:after
          border-color: transparent transparent $c-navy transparent

    &:hover
      &.active
        &:after,
        &:before
          display: none
          display: none

.us-header-nav-parent
  &:hover > .us-header-nav-mainlink
    border-bottom-left-radius: 0
    border-bottom-right-radius: 0

.us-header-nav-link
  +link-colors(white, white, white, white)

.us-header-nav-link,
.us-header-nav-mainlink
  transition-duration: 0ms
  display: block
  text-decoration: none
  outline: none
  -webkit-tap-highlight-color: transparent

.us-header-nav-mainlink
  white-space: nowrap
  +link-colors(#039, white, #039, #039)
  border-radius: 3px
  .touch &
    +link-colors(#039, #039, #039, #039)

  +respond-to(small-tablet, true)
    padding: 8px 5px 11px 6px
    border: 1px solid transparent
    border-bottom: none

  +respond-to(tablet, true)
    padding: 11px 12px 11px 12px

  +respond-to(large-desktop, false, false)
    font-size: 18px

/* main link hover */

@mixin nav-item-hover
  z-index: 1005
  margin-bottom: 0
  color: white
  background-color: $c-navy
  border-color: mix($c-navy, white, 65%)

.us-header-nav-mainitem
  &:hover, &:focus
    .us-header-nav-mainlink
      .ie8 &
        +nav-item-hover
      @media only screen and (min-width : $small-tablet-width)      
        +nav-item-hover

@media only screen and (min-width : $small-tablet-width)
  .us-header-nav-mainitem.open .us-header-nav-mainlink
    +nav-item-hover

.us-header-nav-parent
  .us-header-nav-mainlink
    +respond-to(small-tablet, true)
      padding-bottom: 22px

      &.us-header-nav-corplink
        padding-bottom: 24px

.us-header-nav-item
  float: none
  display: block

.lvl1-energy-s,
.lvl1-broadband-s
  display: none

  +respond-to(small-tablet)
    display: inline

  +respond-to(desktop, true)
    display: none

.lvl1-energy-l,
.lvl1-broadband-l
  display: inline

  +respond-to(small-tablet)
    display: none

  +respond-to(desktop, true)
    display: inline

.lvl1-account-s
  display: none
  +respond-to(small-tablet)
    display: inline

  +respond-to(desktop, true)
    display: none

.lvl1-account-l
  display: inline
  +respond-to(small-tablet)
    display: none
  +respond-to(desktop, true)
    display: inline

.lvl1-account-m
  display: none
  +respond-to(mobile)
    display: inline

.lvl1-account-nm
  display: inline
  +respond-to(mobile)
    display: none

.us-header-nav-dropdown
  display: none

  +respond-to(small-tablet, true)
    display: block
    position: absolute
    left: -9999px
    width: 230px
    margin-top: -1px
    opacity: 0
    background-color: $c-navy
    padding: 4px 0 0 0
    z-index: 1005
    border: 1px solid mix($c-navy, white, 65%)
    border-top: none
    text-align: left
    border-bottom-left-radius: 3px
    border-bottom-right-radius: 3px
    transition: opacity 100ms
    transform: scale3d(1,1,1)

    a
      display: block
      overflow: visible
      padding: 11px 11px
      color: white
      background-color: transparent
      transition: background-color 200ms
      &:hover
        background-color: $c-blue

    .us-header-nav-title
      display: none

/* OPEN DROP MENU */

@mixin sub-menu-open
  left: 0
  opacity: 1
  z-index: 1100

.us-header-nav-mainitem
  &:hover, &:focus, &.open
    .us-header-nav-dropdown
      .ie8 &
        +sub-menu-open

      @media only screen and (min-width : $small-tablet-width)
        +sub-menu-open

/* MOBILE */
@media only screen and (max-width : $mobile-end-width)

  .nav-fixed
    overflow: hidden
    max-height: 100%

  // open button
  .us-header-nav-open
    position: absolute
    display: block
    left: auto
    right: 0
    top: -0.5em
    bottom: 0
    z-index: 2
    width: 100px
    color: $c-blue
    font-size: 18px
    text-indent: -9999em
    cursor: pointer
    &:before
      content: 'menu'
      display: block
      position: absolute
      left: 17px
      top: 15px
      text-indent: 0
    &:after
      content: '\2630'
      display: block
      position: absolute
      right: 12px
      top: 16px
      font-family: uswitch-icon,sans-serif
      text-indent: 0

  // nav menu
  #us-header-nav
    position: fixed
    top: 0em
    right: 0
    left: 0
    height: 0
    z-index: 1100

    .for-tablet
      display: none

    &.on
      height: 2000px
      overflow-y: visible

      .us-header-nav-base
        transition: left 200ms
        left: 0
        
        .csstransforms3d &
          transition: transform 200ms
          transform: translateX(0)
          transition-delay: 0

        &:before
          content: ''
          position: absolute
          left: 10px
          top: 12px
          z-index: 2
          width: 37px
          height: 37px
          background-repeat: no-repeat
          background-size: cover
          transform: scale3d(1,1,1)

    .csstransforms3d &
      transition: height 0ms
      transition-delay: 200ms      
    
  .us-header-nav-mainlink,
  .us-header-nav-link
    +link-colors(white, white, white, white)
    .touch &
      +link-colors(white, white, white, white)
    font-size: 18px
    display: block
    padding: 12px 8px
  
  .us-header-nav-mainlink
    &:after
      content: "\232a"
      float: right
      display: inline-block
      font-family: uswitch-icon,sans-serif
      vertical-align: top

  /* nav close button */
  .us-header-nav-close
    display: none
    position: absolute
    top: 0
    right: 0
    z-index: 10
    height: 61px
    margin: 0
    padding: 21px 17px
    color: $c-blue
    background: #fff
    border: none
    cursor: pointer
    transform: scale3d(1,1,1)
    backface-visibility: hidden
    transform-style: preserve-3d
    &:before
      display: inline-block
      margin-right: 5px
      content: 'close'      
    &:after
      content: '\2715'
      display: inline-block
      vertical-align: middle
      font-family: uswitch-icon,sans-serif
      font-weight: normal

    #us-header-nav.on &
      display: block

    #us-header-nav.lvl2 &
      &:before
        content: 'back'
      &:after
        content: ''
        display: block
        position: absolute
        left: -10px
        top: 0
        border-color: transparent #fff
        border-style: solid
        border-width: 30px 10px 30px 0

  .us-header-nav-base
    position: absolute
    top: 0
    left: 110%
    height: 2000px
    z-index: 1
    width: 100%
    margin: 0
    padding-top: 61px
    background: $c-blue
    border: none
    list-style: none
    font-size: 18px
    overflow: hidden

    &:after
      content: 'uSwitch'
      position: absolute
      top: 0
      left: 0
      right: 0
      height: 61px
      padding-left: 55px
      line-height: 61px
      color: #fff
      background-color: $c-navy

    .csstransforms3d &
      left: 0
      transform: translateX(100%)
      backface-visibility: hidden

  .us-header-nav-item,
  .us-header-nav-mainitem,
  .us-header-account,
  .us-header-nav-corpitem
    display: block
    margin: 0 5px
    border-bottom: 1px solid lighten( $c-blue, 40% )

  .us-header-nav-item,
  .us-header-nav-mainitem
    position: static
    
  .us-header-nav-title
    display: block
    position: absolute
    left: 55px
    top: -38px
    z-index: 3
    color: #fff
    border: none

  .us-header-nav-dropdown
    transition: left 200ms
    padding: 0
    position: fixed
    display: block
    top: 0
    left: 110%
    z-index: 1
    width: 100%
    height: auto
    min-height: 100%
    margin: 0
    background: $c-blue
    border-top: 61px solid $c-navy
        
    /* open level 2 menus */
    &.on
      left: 0

    ul    
      -webkit-transform: none
      -moz-transform: none
      transform: none

    .csstransforms3d &
      left: 0
      transform: translateX(100%)
      transition: transform 200ms      
        
      &.on
        transform: translateX(0)

@media screen and (max-width: $mobile-end-width) and (min-height: 460px)
  .us-header-nav-mainlink, .us-header-nav-link
    padding: 16px 8px