// Form validation
// ---
// Validation message and input styling provides a consistent look and feel to uStyle forms.
//
// Styleguide 2.5

$message-padding-vertical: 0.35em
$message-padding-horizontal: 1em
$message-min-height: 2.4em
$message-triangle-size: 10px
$icon-bg-size: 26px
$icon-input-bg-size: $icon-bg-size / 2
$icon-ratio: $base-font-size / $icon-bg-size

$error-color: $c-red
$error-icon: '\2718'
$error-icon-color: #fff

$success-color: $c-green
$success-icon: '\2714'
$success-icon-color: #fff

=validation-style($color: $error-color, $icon: $error-icon, $icon-color: $error-icon-color, $text-color: $error-color)
  .us-validation__message
    color: $text-color
    background-color: #fff
    border-color: $color

    &:before,
    &:after
      border-color: $color

    &:after
      border-right-color: #fff

  .us-validation__icon
    color: $icon-color
    background-color: $color

    &:before
      content: $icon

=validation-input-style($color, $icon, $icon-color)
  .us-form-input,
  .us-form-input:hover
    border-color: $color

  &:after
    content: $icon
    color: $icon-color
    background-color: $color

.us-validation
  padding: 0.25em 0 0.25em ($icon-bg-size + 5)
  position: relative

.us-validation__message
  margin: 0 0 0 $message-triangle-size
  padding: $message-padding-vertical $message-padding-horizontal
  min-height: $message-min-height
  line-height: 1.5
  border-width: 1px
  border-style: solid
  border-radius: 3px
  position: relative

  &:before,
  &:after
    border-width: $message-triangle-size
    border-style: solid
    border-top-color: transparent !important
    border-bottom-color: transparent !important
    border-left-width: 0
    content: ' '
    position: absolute
    top: 8px
    left: -$message-triangle-size

  &:after
    left: -$message-triangle-size + 1

.us-validation__icon
  @extend %icon-font
  width: $icon-bg-size
  height: $icon-bg-size
  text-align: center
  font-size: $icon-bg-size * $icon-ratio
  line-height: $icon-bg-size
  border-radius: 50%
  position: absolute
  top: 10px
  left: 0

.us-validation
  &.us-validation--error
    +validation-style()

  &.us-validation--success
    +validation-style($success-color, $success-icon, $success-icon-color, $success-color)

.us-validation__input
  position: relative
  display: inline-block

  &:after
    @extend %icon-font
    width: $icon-input-bg-size
    height: $icon-input-bg-size
    line-height: $icon-input-bg-size
    font-size: $icon-input-bg-size * $icon-ratio
    text-align: center
    border-radius: 50%
    content: ' '
    position: absolute
    top: -($icon-input-bg-size * $icon-ratio) / 2
    right: -($icon-input-bg-size * $icon-ratio) / 2

  &.us-validation__input--error
    +validation-input-style($error-color, $error-icon, $error-icon-color)

  &.us-validation__input--success
    +validation-input-style($success-color, $success-icon, $success-icon-color)
