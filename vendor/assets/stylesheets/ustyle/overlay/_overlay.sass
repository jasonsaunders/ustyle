%overlay
  backface-visibility: hidden
  perspective: 1000
  height: 100%
  position: fixed
  z-index: 1003
  background: white
  overflow: auto
  -webkit-overflow-scrolling: auto
  top: 0
  width: calc(100% - 25px)
  transition: transform 0.5s
  transition-timing-function: cubic-bezier(0.175, 0.885, 0.335, 1.05)
  +respond-to(small-tablet, true)
    width: 340px
  .us-overlay-parent--modal &
    +respond-to(desktop)
      transition: all 0.3s
      position: relative
      width: 60%
      margin: 5% auto
      transform: translateX(0) scale(0.9) 
      -webkit-transform: translate3D(0,0,0) scale(0.9) 

%overlay--open
  transform: translateX(0)
  -webkit-transform: translate3D(0,0,0)
  .no-cssanimations &
    left: 0
  .us-overlay-parent--modal &
    +respond-to(desktop)
      transform: translateX(0) scale(1) !important
      -webkit-transform: translate3D(0,0,0) scale(1) !important

%overlay__back-layer
  width: 100%
  height: 150%
  position: fixed
  background: $c-blue
  top: 0
  left: 0
  z-index: 1002
  display: none
  opacity: 0.5

%overlay__back-layer--open
  display: block

%overlay__container
  @extend %container
  padding: 1em

.us-overlay-parent

.us-overlay-parent--modal
  +respond-to(desktop)
    display: none
    position: fixed
    top: 0
    left: 0
    width: 100%
    z-index: 1004
    &.overlay--opened
      display: block

.us-overlay
  transform: translateX(-100%)
  -webkit-transform: translate3D(-100%,0,0)
  @extend %overlay
  left: 0
  .no-cssanimations &
    left: -100%
  .overlay--opened &
    @extend %overlay--open

.us-overlay__header
  background: $c-navy
  color: white
  padding: 1em

.us-overlay__title

.us-overlay--right
  @extend %overlay
  transform: translateX(100%)
  -webkit-transform: translate3D(100%,0,0)
  right: 0
  .no-cssanimations &
    right: -100%
  .overlay--opened &
    @extend %overlay--open

.us-overlay--open
  @extend %overlay--open

.us-overlay__container
  @extend %overlay__container

.us-overlay__back-layer
  @extend %overlay__back-layer

  .overlay--opened &
    @extend %overlay__back-layer--open

.us-overlay__back-layer--open
  @extend %overlay__back-layer--open