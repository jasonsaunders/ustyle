// Overlay sliding from left
// ---
// Shows when adding the class .us-overlay--open to the parent
//
// Styleguide 6.3


// Overlay sliding from right
// ---
// Shows when adding the class .us-overlay--open to the parent.
// To make it snap on the right side the class .us-overlay--right needs to be added on .us-overlay
//
// Styleguide 6.4

// Overlay modal
// ---
// Shows when adding the class .us-overlay--open to the parent
// Works on both right and left, if the class .us-overlay-modal-parent is added on a parent, it will turn into a modal on a desktop
//
// Styleguide 6.5

$overlay_max_modal_width: 700px !default
$overlay_forced_z_index: 1003 !default
$overlay_transition_speed: 0.4s !default
$overlay_modal_breakpoint: desktop !default


@keyframes scaleUp
  from
    transform: translateX(0) scale(0.9) 
    .csstransforms3d &
      transform: translate3D(0,0,0) scale(0.9) 
  to
    transform: translateX(0) scale(1) 
    .csstransforms3d &
      transform: translate3D(0,0,0) scale(1) 


%overlay
  backface-visibility: hidden
  perspective: 1000
  height: 100%
  position: fixed
  z-index: $overlay_forced_z_index
  background: white
  overflow: auto
  -webkit-overflow-scrolling: auto
  top: 0
  width: calc(100% - 25px)
  transition: transform $overlay_transition_speed
  transition-timing-function: cubic-bezier(0.175, 0.885, 0.335, 1.05)
  +respond-to(small-tablet, true)
    width: 340px
  .us-overlay-modal-parent &
    +respond-to($overlay_modal_breakpoint,true)
      transition: all $overlay_transition_speed
      position: relative
      width: 60%
      max-width: $overlay_max_modal_width
      margin: 5% auto
      transform: translateX(0) scale(0.9) 
      .csstransforms3d &
        transform: translate3D(0,0,0) scale(0.9) 

%overlay--open
  transform: translateX(0)
  .csstransforms3d &
    transform: translate3D(0,0,0)
  .no-cssanimations &
    left: 0
  
%overlay__back-layer
  width: 100%
  height: 150%
  position: fixed
  background: $c-blue
  top: 0
  left: 0
  z-index: $overlay_forced_z_index - 1
  display: none
  opacity: 0.5

%overlay__back-layer--open
  display: block

%overlay__container
  @extend %container
  padding: 1em
  

.us-overlay-modal-parent
  +respond-to($overlay_modal_breakpoint, true)
    display: none
    position: fixed
    top: 0
    left: 0
    width: 100%
    z-index: $overlay_forced_z_index + 1
    &.us-overlay--open
      display: block

.us-overlay
  @extend %overlay
  transform: translateX(-100%)
  left: 0
  .csstransforms3d &
    transform: translate3D(-100%,0,0)
  .no-cssanimations &
    left: -100%
  .us-overlay--open &
    @extend %overlay--open
  .us-overlay--open.us-overlay-modal-parent &
    +respond-to($overlay_modal_breakpoint,true)
      animation: scaleUp $overlay_transition_speed
      transform: translateX(0) scale(1)
      .csstransforms3d &
        transform: translate3D(0,0,0) scale(1)
      
.us-overlay__header
  background: $c-navy
  color: white
  padding: 1em

.us-overlay__close
  cursor: pointer
  background-image: url(ustyle-image-path("anchor/close_white_fallback.png"))
  background: inline-asset("anchor/close_white.svg")
  width: 50px
  height: 50px
  border: 0
  position: absolute
  right: 0
  z-index: 10
  background-size: 40px
  top: 0.5em
  background-repeat: no-repeat

.us-overlay--right
  transform: translateX(100%)
  right: 0
  left: auto
  .csstransforms3d &
    transform: translate3D(100%,0,0)
  .no-cssanimations &
    right: -100%
  .us-overlay--open &
    @extend %overlay--open

.us-overlay__container
  @extend %overlay__container

.us-overlay__back-layer
  @extend %overlay__back-layer

  .us-overlay--open &
    @extend %overlay__back-layer--open

.us-overlay__back-layer--open
  @extend %overlay__back-layer--open