// Tabs
// ---
// These are the basic tabs used for landing pages. You can either reference a data-target for the urls or href
// for the target tabs. They have a non-js fallback and fold over to accordion when in small tablet view. They are initialised
// on page load if the tabs classes exist
//
// Styleguide 5.3

$tab-width: col-width(2) !default

+keyframes(tab-show)
  0%
    +opacity(0)
  100%
    +opacity(1)

// Tab nav
.us-tabs-nav
  display: none
  background-color: $c-navy

  +respond-to(tablet)
    .js &
      display: block

  .js.ie8 & 
    display: block

.us-tabs-nav-wrapper
  @extend %container
  +padding-leader(0.5)

.us-tabs-nav-menu
  overflow: hidden
  width: 100%
  display: -webkit-flex
  display: flex
  flex-flow: row

.us-tabs-nav-link
  @extend %heading-font-regular
  +border-top-radius(5px)
  +link-colors(white, $c-typecyan, $c-typecyan, white)
  padding: 0.475em 0.15em 1.2em
  width: $tab-width
  vertical-align: middle
  text-align: center
  align-items: center
  justify-content: center
  display: flex
  display: -webkit-flex
  -webkit-justify-content: center
  -webkit-align-items: center
  flex-flow: column
  position: relative
  z-index: 10

  .no-flexboxlegacy &
    height: 70px
    display: block
    float: left

  +respond-to(tablet)
    +adjust-font-size-to(14px, 0.75)

  +respond-to(desktop)
    +adjust-font-size-to(16px, 0.8)

  +respond-to(large-desktop)
    +heading(4)

  &:hover
    &:before
      +translate3d(0,0,0)

      .no-csstransforms &
        top: 0

  &:before
    +transition(transform 300ms)
    +translate3d(0,200px,0)
    +border-top-radius(5px)
    content: ""
    position: absolute
    width: 100%
    display: none
    background-color: white
    top: 0
    bottom: 0
    left: 0
    z-index: -1
  .csstransitions &,&:hover
    &:before
      display: block

  &:after
    content: ""
    position: absolute
    bottom: 0
    left: -4px
    right: -4px
    height: 0
    border-style: solid
    border-width: 0 4px 4px 4px
    border-color: transparent

  &.active
    +box-shadow(0px 0 10px rgba(0,0,0,0.5))
    background-color: white
    color: $c-navy
    z-index: 15

    &:after
      border-color: white transparent

// Tabs    
.us-tabs-container
  @extend %container

  +respond-to(to-tablet)
    padding: 0 !important
  
.us-tab-title
  @extend %heading-font-regular
  @extend %heading-4
  margin: 0
  position: relative

  +respond-to(tablet)
    .js &
      display: none

  .js.ie8 &
    display: none

  a
    +transition(color 300ms, background-color 300ms)
    +link-colors($c-navy, white, $c-navy)
    padding: 0.5em 0.75em
    border-bottom: 1px solid white
    display: block
    background-color: $c-cyan

    .active &
      background-color: $c-navy
      color: white
      cursor: default

      &:before
        +rotate(90deg)

    &:hover
      &:before
        +rotate(90deg)
        color: white

    &:before
      +transition(all 300ms)
      @extend %icon-font
      content: "\25b6"
      display: inline-block
      margin-right: 0.75em
      font-size: 0.75em

.us-tab-content
  @extend %container
  +opacity(1)
  +padding-leader(1)
  overflow: hidden
  display: block

  .js &
    max-height: 0

    +respond-to(tablet)
      display: none
      max-height: none

  .ie8.js &
    display: none
    max-height: none
    
  .us-tab.active &
    max-height: 9999px

    +respond-to(tablet,true)
      display: block
      +animation(tab-show, 1s)