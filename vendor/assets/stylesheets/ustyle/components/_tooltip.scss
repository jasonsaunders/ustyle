// @section JS components
// @name Tooltip
//
// @description
//  `.us-tooltip` can be applied to any parent, and by hovering it, it will toggle the visibility of `.us-tooltip__note`
//
//  Tooltip doesn't have it's own javascript file, all it needs is to toggle a class, for that we can use:
//
// `var tooltips = new ClassToggler({
//   containerClass: '.us-tooltip',
//   $target: $('.us-tooltip__icon'),
//   activeClass: "us-tooltip--active"
// });`
//
//
// @markup
//   <h4>Hover on the tooltip</h4>
//   <div class="tooltip-demo">
//     <div class="us-field">
//       <label for='name'>Name</label>
//       <input class='us-form-input' id='name' name='name' placeholder='Please enter your name'>
//     </div>
//     <div class="us-tooltip">
//       <div class="us-tooltip__icon"></div>
//       <div class="us-tooltip__note"><strong>Tooltip</strong> message content</div>
//     </div>
//   </div>
//   <h4>Hover on the parent</h4>
//   <div class="tooltip-demo us-tooltip">
//     <div class="us-tooltip__icon"></div>
//     <div class="us-field">
//       <label for='name'>Name</label>
//       <input class='us-form-input' id='name' name='name' placeholder='Please enter your name'>
//     </div>
//     <div class="us-tooltip__note"><strong>Tooltip</strong> message content</div>
//   </div>

$tooltip-note-width: 300px;
$tooltip-icon-size: 22px;

@mixin tooltip--active {
  .us-tooltip__note {
    display: block;
    pointer-events: all;
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }

  .us-tooltip__icon {
    background: $c-typecyan;
  }
}

.us-tooltip {
  &.us-tooltip--active {
    @include respond-to(to-tablet) {
      @include tooltip--active;
    }
  }

  &:hover {
    @include respond-to(desktop, true) {
      @include tooltip--active;
    }
  }
}

.us-tooltip__icon {
  position: absolute;
  top: 0;
  right: 0;
  z-index: 2;
  width: $tooltip-icon-size;
  height: $tooltip-icon-size;
  font-weight: bold;
  line-height: $tooltip-icon-size;
  color: #fff;
  text-align: center;
  text-indent: 1px;
  cursor: pointer;
  background: $c-inputgrey;
  border-radius: 50%;

  &:before {
    content: "?"
  }
}

.us-tooltip__note {
  position: relative;
  display: none;
  padding: 1em;
  margin-top: 2em;
  margin-bottom: 1em;
  color: $c-typegrey;
  background: #fff;
  border: 2px solid $c-typecyan;
  border-radius: 4px;
  transition: opacity .2s, transform .2s;
  transition-timing-function: cubic-bezier(.175, .885, .335, 1.05);

  @include respond-to(desktop, true) {
    position: absolute;
    top: -15px;
    right: -($tooltip-note-width + ($tooltip-icon-size/2));
    z-index: 1;
    display: block;
    width: $tooltip-note-width;
    margin-top: 0;
    margin-bottom: 0;
    pointer-events: none;
    border-width: 1px;
    opacity: 0;
    transform: translate3d(30px, 0, 0);
  }

  .no-csstransforms & {
    display: none;
  }

  &:before {
    @include arrow(20px, 10px, up, $c-typecyan);
    top: -10px;

    @include respond-to(desktop, true) {
      @include arrow(10px, 20px, left, $c-typecyan);
      left: -20px;
    }
  }

  &:after {
    @include arrow(20px, 10px, up, #fff);
    top: -7px;

    @include respond-to(desktop, true) {
      @include arrow(10px, 20px, left, #fff);
      left: -19px;
    }
  }

  &:before,
  &:after {
    position: absolute;
    right: 0;
    content: "";

    @include respond-to(desktop, true) {
      top: ($tooltip-icon-size/2);
      right: auto;
    }
  }
}
