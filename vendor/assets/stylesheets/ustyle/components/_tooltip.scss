// @section JS components
// @name Tooltip
//
// @description
//  `.us-tooltip` can be applied to any parent, and by hovering it, it will toggle the visibility of `.us-tooltip__note`
//
//  Tooltip doesn't have it's own javascript file, all it needs is to toggle a class, for that we can use:
//
// `var tooltips = new ClassToggler({
//   containerClass: '.us-tooltip',
//   $target: $('.us-tooltip__icon'),
//   activeClass: "us-tooltip--active"
// });`
//
//
// @markup
//   <h4>Hover on the tooltip</h4>
//
//   <div class="tooltip-demo">
//     <div class="us-field">
//       <label for='name'>Name</label>
//       <input class='us-form-input' id='name' name='name' placeholder='Please enter your name'>
//     </div>
//
//     <div class="us-tooltip us-tooltip__wrapper">
//       <div class="us-tooltip__icon"></div>
//       <div class="us-tooltip__note us-tooltip__note--right"><strong>Tooltip</strong> message content</div>
//     </div>
//   </div>
//
//   <h4>Hover on the parent</h4>
//
//   <div class="tooltip-demo us-tooltip">
//     <div class="us-field">
//       <label for='name'>Name</label>
//       <input class='us-form-input' id='name' name='name' placeholder='Please enter your name'>
//     </div>
//
//     <div class="us-tooltip__wrapper">
//       <div class="us-tooltip__icon"></div>
//       <div class="us-tooltip__note us-tooltip__note--right"><strong>Tooltip</strong> message content</div>
//     </div>
//   </div>

$tooltip-note-width: 300px;
$tooltip-icon-size: 22px;
$tooltip-note-padding-vertical: 1em;
$tooltip-note-padding-horizontal: .75em;

@mixin tooltip--active {
  .us-tooltip__note {
    display: block;
    pointer-events: all;
    opacity: 1;
  }

  .us-tooltip__icon {
    background: $c-typecyan;
  }
}

@mixin tooltip-note--position($position: "right") {
  @include respond-to(tablet, true) {
    @if $position == "right" {
      top: -$tooltip-note-padding-vertical;
      right: -($tooltip-note-width + ($tooltip-icon-size / 2));
    } @else if $position == "top" {
      top: -($tooltip-icon-size + $tooltip-icon-size / 2);
      right: -($tooltip-note-width / 2 - $tooltip-icon-size / 2);
      transform: translateY(-50%);
    } @else if $position == "bottom" {
      top: $tooltip-icon-size + $tooltip-icon-size / 2;
      right: -($tooltip-note-width / 2 - $tooltip-icon-size / 2);
      transform: translateY(50%);
    } @else if $position == "left" {
      top: -$tooltip-note-padding-vertical;
      right: $tooltip-icon-size + $tooltip-icon-size / 2;
    }
  }
}

.us-tooltip {
  &.us-tooltip--active {
    @include respond-to(tablet, true) {
      @include tooltip--active;
    }
  }

  &:hover {
    @include respond-to(tablet, true) {
      @include tooltip--active;
    }
  }
}

.us-tooltip__wrapper {
  position: absolute;
  top: 0;
  right: 0;
}

.us-tooltip__icon {
  width: $tooltip-icon-size;
  height: $tooltip-icon-size;
  font-weight: bold;
  line-height: $tooltip-icon-size;
  color: #fff;
  text-align: center;
  text-indent: 1px;
  cursor: pointer;
  background: $c-inputgrey;
  border-radius: 50%;

  &:before {
    content: "?";
  }
}

.us-tooltip__note {
  position: relative;
  display: none;
  padding: $tooltip-note-padding-horizontal $tooltip-note-padding-vertical;
  margin-top: 2em;
  margin-bottom: 1em;
  color: $c-typegrey;
  background: #fff;
  border: 1px solid $c-typecyan;
  border-radius: 4px;
  transition: opacity 300ms ease;

  @include respond-to(tablet, true) {
    position: absolute;
    display: block;
    width: $tooltip-note-width;
    margin-top: 0;
    margin-bottom: 0;
    pointer-events: none;
    opacity: 0;
  }
}

.us-tooltip__note--top {
  @include tooltip-note--position("top");
}

.us-tooltip__note--right {
  @include tooltip-note--position("right");
}

.us-tooltip__note--bottom {
  @include tooltip-note--position("bottom");
}

.us-tooltip__note--left {
  @include tooltip-note--position("left");
}
